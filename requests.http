# A variable for our base URL to keep things clean
@baseUrl = http://localhost:8080/users

### 1. CREATE User #1 (and capture the ID)
# @name createUser1
POST {{baseUrl}}
Content-Type: application/json

{
  "username": "john.doe",
  "password": "password123"
}

@userId1 = {{createUser1.response.body.$.id}}

### 2. CREATE User #2
POST {{baseUrl}}
Content-Type: application/json

{
  "username": "jane.smith",
  "password": "password456"
}

### 3. READ all users
# You should see both john.doe and jane.smith in the response list.
GET {{baseUrl}}

### 4. READ a single user by ID
# This uses the ID captured from the first user we created.
GET {{baseUrl}}/{{userId1}}

### 5. UPDATE the first user
# We will change john.doe's username to john.doe.updated.
PUT {{baseUrl}}/{{userId1}}
Content-Type: application/json

{
  "username": "john.doe.updated",
  "password": "aNewSecurePassword"
}

### 6. VERIFY the update worked
# Let's fetch the user again to see the new username.
GET {{baseUrl}}/{{userId1}}

### 7. DELETE the first user
DELETE {{baseUrl}}/{{userId1}}

### 8. VERIFY the deletion worked
# This request should now fail with a 404 Not Found error,
# because the user has been deleted.
GET {{baseUrl}}/{{userId1}}

### 9. READ all users again
# The list should now only contain jane.smith.
GET {{baseUrl}}